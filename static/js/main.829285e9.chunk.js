(this["webpackJsonpstock-watcher"]=this["webpackJsonpstock-watcher"]||[]).push([[0],{204:function(e,t,n){},221:function(e,t,n){},401:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){"use strict";n.r(t);var a,s=n(2),c=n(1),r=n.n(c),i=n(58),o=n.n(i),u=n(10),l=n.n(u),d=n(59),j=n(8),b=n(17),f=n(13),h=function(e){return Object(s.jsx)("div",{className:function(){var t="field";return e.hasAddons&&(t+=" has-addons"),e.isGrouped&&(t+=" is-grouped","object"===typeof e.isGrouped&&(e.isGrouped.position?t+=" is-grouped-".concat(e.isGrouped.position):e.isGrouped.multiline&&(t+=" is-grouped-multiline"))),e.isNarrow&&(t+=" is-narrow"),e.className&&(t+=" ".concat(e.className)),t}(),children:e.children})},g=function(e){return Object(s.jsxs)("button",{type:e.type,name:e.name,className:"button ".concat(e.className?e.className:""," ").concat(e.isLoading?"is-loading":""),disabled:e.disabled||e.isLoading,onClick:e.onClick,children:[e.text&&e.children?Object(s.jsx)("span",{children:e.text}):e.text,e.children]})},m=n(64),p=n(154),O=n(155),v=n(156),x=n(169),y=n(168),S=function(e){var t=e.id,n=e.inputClassName,a=(e.className,Object(m.a)(e,["id","inputClassName","className"]));return Object(s.jsx)("input",Object(j.a)({id:t,className:function(){var e="input";return n&&(e+=" ".concat(n)),e}()},a))},N=(n(204),function(e){var t=e.suggestions;return Object(s.jsx)("ul",{className:"box suggestions",children:t.map((function(t,n){return Object(s.jsxs)("li",{className:"suggestion",onClick:function(){return e.onSelection(t.symbol)},children:[Object(s.jsxs)("span",{className:"suggestion--symbol",children:[" ",t.symbol," "]})," ",Object(s.jsx)("span",{className:"suggestion--name",children:t.name})]},n)}))})}),k=function(e){Object(x.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).timeoutId=void 0,a.handleSelect=function(e){a.props.onChoose(e.slice(e.indexOf("$")+1,e.length)),a.setState({value:e,suggestions:[]}),clearTimeout(a.timeoutId)},a.handleChange=function(e){clearTimeout(a.timeoutId);var t=e.target.value;if(a.setState({value:t,suggestions:[]}),a.props.onChange&&a.props.onChange(e),t){a.setState({isLoading:!0});var n=setTimeout(Object(b.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSuggestions(t);case 3:s=e.sent,a.timeoutId===n&&s&&a.setState({suggestions:s,isLoading:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),700);a.timeoutId=n}},a.isValueFromSuggestions=function(){var e,t=a.state.value.toLowerCase(),n=Object(p.a)(a.state.suggestions);try{for(n.s();!(e=n.n()).done;){if(e.value.symbol.toLowerCase()===t)return!0}}catch(s){n.e(s)}finally{n.f()}return!1},a.timeoutId=void 0,a.state={suggestions:[],value:"",isLoading:!1},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.value&&this.setState(Object(j.a)(Object(j.a)({},this.state),{},{value:this.props.value}))}},{key:"getSuggestions",value:function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.getSuggestions){e.next=4;break}return e.next=3,this.props.getSuggestions(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=this.state,n=(e.onChange,e.onSelect,e.getSuggestions,e.onChoose,e.className),a=Object(m.a)(e,["onChange","onSelect","getSuggestions","onChoose","className"]);return Object(s.jsxs)("div",{className:"suggestions--container is-relative",children:[Object(s.jsx)(S,Object(j.a)({type:"text",value:t.value,onChange:this.handleChange,className:"".concat(n||"").concat(t.isLoading?" is-loading":"")},a)),Object(s.jsx)(N,{suggestions:t.suggestions,onSelection:this.handleSelect})]})}}]),n}(r.a.Component),w=n(157),C=n.n(w).a.create(),T=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){C(t).then((function(t){e(t)})).catch((function(t){t.response?e(t.response):n(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=n(60),E=n.n(D),L="TCVWRTR5D693E1AT",R=function(e){return"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=".concat(e,"&outputsize=full&apikey=").concat(L)},A=function(e){return"https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(e,"&apikey=").concat(L)},I=function(e){var t=e.indexOf(" ")+1;return e.slice(t)};!function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.DELETE="DELETE",e.PUT="PUT"}(a||(a={}));n(221);var _=function(e){var t=Object(c.useState)(),n=Object(f.a)(t,2),r=n[0],i=n[1],o=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:a.GET,url:A(t)});case 2:return s=e.sent,c=s.data,e.abrupt("return",null!==(n=c.bestMatches.slice(0,5).map((function(e){return{symbol:e["1. symbol"],name:e["2. name"]}})))&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(h,{isGrouped:!0,className:"search--form",children:[Object(s.jsx)(k,{placeholder:"Type ticker or company name",inputClassName:"search--form__search--input",id:"test",onChange:function(e){i(e.target.value)},onChoose:function(e){return i(e)},getSuggestions:o}),Object(s.jsx)(g,{className:"is-info search--form__search--button",text:"Search",onClick:function(){e.onSearch&&r&&e.onSearch(r)},disabled:!r,isLoading:e.isLoading})]})},G=n(19),P=function(e){return Object(s.jsxs)("article",{className:function(){var t="message ";return e.type&&(t+=e.type),e.classNames&&(t+=" "+e.classNames),t}(),children:[Object(s.jsx)("div",{className:"message-header",children:Object(s.jsx)("p",{children:e.header})}),Object(s.jsx)("div",{className:"message-body",children:e.body})]})},F=(n(401),function(e){var t,n=Object(c.useState)(0),a=Object(f.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){if(e.items){var t=e.items.reduce((function(e,t){return e+ +t.open}),0);i(t/e.items.length)}}),[e.items]),Object(s.jsx)(G.e,{className:null!==(t=e.classNames)&&void 0!==t?t:e.classNames,width:"60%",height:500,children:e.items&&e.items.length>0?Object(s.jsxs)(G.c,{data:e.items,margin:{top:5,right:30,left:20,bottom:5},children:[Object(s.jsx)(G.a,{strokeDasharray:"3 3"}),Object(s.jsx)(G.g,{dataKey:"date",tick:{fontSize:12},tickFormatter:function(e){return E()(e).format("DD/MM/YYYY")}}),Object(s.jsx)(G.h,{tick:{fontSize:12},tickFormatter:function(e){return"$"+e}}),Object(s.jsx)(G.f,{}),Object(s.jsx)(G.b,{type:"monotone",dataKey:"open",stroke:"#0099ff"}),e.showAverage&&Object(s.jsx)(G.d,{y:r,stroke:"#ff8533",strokeDasharray:"10"})]}):Object(s.jsx)("div",{className:"feedback",children:Object(s.jsx)(P,{type:"is-dark",header:"No loaded data",body:"Search for a stock and select date range to display data"})})})}),M=n(167),Y=(n(408),n(409),{startDate:new Date,endDate:new Date}),B={key:"selection"},z=function(e){var t=Object(c.useState)(e.initialRange?Object(j.a)(Object(j.a)({},e.initialRange),B):Object(j.a)(Object(j.a)({},Y),B)),n=Object(f.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){var t=Object(j.a)(Object(j.a)({},e.initialRange),B);r(t)}),[e.initialRange]);return Object(s.jsx)(M.DateRange,{ranges:[a],onChange:function(t){r(t.selection),e.onChangeRange(t.selection)}})},H=function(e){var t;return Object(s.jsxs)(h,{className:null!==(t=e.classNames)&&void 0!==t?t:e.classNames,children:[Object(s.jsx)("input",{type:"checkbox",id:"switch",className:function(){var t="switch ";return e.isRounded&&(t+="is-rounded"),e.type&&(t+=" "+e.type),t}(),onChange:function(t){e.onToggle&&e.onToggle(t.target.checked)}}),Object(s.jsx)("label",{htmlFor:"switch",children:"Average price"})]})},J=(n(410),function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),o=Object(f.a)(i,2),u=o[0],h=o[1],g=Object(c.useState)(!1),m=Object(f.a)(g,2),p=m[0],O=m[1],v=Object(c.useState)(),x=Object(f.a)(v,2),y=x[0],S=x[1],N=Object(c.useState)(!1),k=Object(f.a)(N,2),w=k[0],C=k[1];Object(c.useEffect)((function(){var e=function(){var e=new Date;return{startDate:E()(e).subtract(1,"year").toDate(),endDate:e}}();S(e),D(e),O(!1)}),[a]);var D=function(e){var t=a.filter((function(t){return new Date(t.date)>e.startDate&&new Date(t.date)<e.endDate}));h(t)},L=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,a,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){O(!1)}),1e4),O(!0),e.next=4,T({method:"GET",url:R(t)});case 4:n=e.sent,a=n.data,s=n.status,c=[],i=a["Time Series (Daily)"],200===s&&i?(Object.keys(i).forEach((function(e){var t={date:e};Object.entries(i[e]).forEach((function(e){var n=Object(f.a)(e,2),a=n[0],s=n[1];t=Object(j.a)(Object(j.a)({},t),{},Object(d.a)({},I(a),+s))})),c.push(t)})),r(c.reverse())):(console.log("API CALL ERROR"),console.log("Status: "+s),console.log("Body: "+Object(j.a)({},a)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_,{onSearch:L,isLoading:p}),Object(s.jsxs)("div",{className:"main--container",children:[Object(s.jsx)(F,{classNames:"main--container__chart",items:u,showAverage:w}),Object(s.jsxs)("div",{className:"main--container__configurations",children:[Object(s.jsx)(z,{onChangeRange:D,initialRange:y}),Object(s.jsx)(H,{classNames:"average--price",type:"is-info",onToggle:function(e){C(e)},isRounded:!0})]})]})]})});n(411);var U=function(){return Object(s.jsx)(J,{})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};n(412);o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(U,{})}),document.getElementById("root")),q()}},[[413,1,2]]]);
//# sourceMappingURL=main.829285e9.chunk.js.map